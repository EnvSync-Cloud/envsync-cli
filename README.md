# EnvSync CLI ğŸ’»

The command line interface for [EnvSync Cloud](https://envsync.cloud) - seamlessly sync your environment configurations from your terminal.

> **Built with Go and the urfave/cli framework** âš¡  
> Fast, reliable, and developer-friendly CLI for environment synchronization.

## âœ¨ What is EnvSync?

EnvSync keeps your `.env` files, configuration secrets, and environment variables perfectly synchronized across development, staging, and production environments.

**Key Benefits:**
- ğŸ”’ **Secure** - End-to-end encryption for sensitive data
- âš¡ **Fast** - Real-time synchronization across environments  
- ğŸŒ **Web-first** - Built for modern web development workflows
- ğŸ”§ **Developer-friendly** - Simple CLI commands for terminal lovers

## ğŸ› ï¸ Tech Stack

- **Go** - High-performance systems language
- **urfave/cli** - Feature-rich CLI framework
- **Uber Zap** - Structured logging
- **Auth0** - Authentication and authorization

## ğŸš€ Installation

### Install from Release

```bash
curl -L https://github.com/EnvSync-Cloud/envsync-cli/releases/latest/download/envsync-linux-amd64 -o envsync
chmod +x envsync
sudo mv envsync /usr/local/bin/
```

### Install from Source

```bash
git clone https://github.com/EnvSync-Cloud/envsync-cli.git
cd envsync-cli
make build
sudo mv bin/envsync /usr/local/bin/
```

### Verify Installation

```bash
envsync --help
```

## ğŸ“– Usage

### Authentication Commands

```bash
# Login to EnvSync Cloud
envsync login

# Check current user
envsync whoami

# Logout from EnvSync Cloud
envsync logout
```

### Project Initialization

```bash
# Generate a new configuration file
envsync init --app "my-app" --env-type "development"
envsync init -a "my-app" -e "production"
```

### Environment Synchronization

```bash
# Push local environment variables to remote
envsync push

# Pull environment variables from remote
envsync pull
```

### Application Management

```bash
# Create a new application
envsync app create

# List all applications
envsync app list

# Delete an application
envsync app delete --id "app-id"
envsync app delete -i "app-id"
```

### Environment Type Management

```bash
# List all environment types for a specific app
envsync env-type list --app-id "app-id"
envsync env-type list -a "app-id"

# View details of a specific environment type
envsync env-type view --id "env-type-id"
envsync env-type view -i "env-type-id"
```

### Configuration Management

```bash
# Set a configuration value
envsync config set

# Get a configuration value
envsync config get
```

### Run Commands with Environment

```bash
# Execute commands with synced environment variables
envsync run --command "npm start"
envsync run -c "python app.py"
envsync run -c "go run main.go"

# Run with redacted output (for testing)
envsync run -c "npm start" --redact "secret-value"
envsync run -c "npm start" -r "secret-value"
```

### Global Options

```bash
# Output in JSON format
envsync --json app list
envsync -j whoami

# Show help
envsync --help
envsync -h
```

## ğŸ“‹ Command Reference

```
NAME:
   envsync - sync environment variables between local and remote environments

USAGE:
   envsync [global options] [command [command options]]

COMMANDS:
   init      Generate a new configuration file
   run       Run with project command
   app       Interact with your apps.
   env-type  Manage environment types.
   config    Manage configuration settings.
   help, h   Shows a list of commands or help for one command

   AUTH:
     login   Login to Envsync Cloud
     whoami  Display current user information
     logout  Logout from Envsync Cloud

   SYNC:
     push  Push environment variables to remote environment
     pull  Pull environment variables from remote environment

GLOBAL OPTIONS:
   --json, -j  Output in JSON format (default: false)
   --help, -h  show help
```

## ğŸ”§ Configuration

### Project Configuration (`envsyncrc.toml`)

EnvSync CLI uses a TOML configuration file (`envsyncrc.toml`) in your project root to store project-specific settings:

```toml
app_id = "your-app-id"
env_type_id = "your-env-type-id"
```

This file is automatically generated when you run `envsync init` and is used by the sync service to identify your project and environment configuration.

### Authentication Methods

EnvSync CLI supports multiple authentication methods with the following priority:

1. **API Key (Recommended for CI/CD)** - Set the `API_KEY` environment variable
2. **JWT Token** - Obtained through `envsync login` and stored in user config

#### Using API Key in CI/CD Environments

For automated environments like CI/CD pipelines, use the `API_KEY` environment variable:

```bash
# Set API key as environment variable
export API_KEY="your-api-key-here"

# Now run envsync commands
envsync pull
envsync run -c "npm test"
```

This method is preferred for CI/CD because:
- No interactive login required
- More secure for automated environments
- Easier to manage in CI/CD secret management systems

## ğŸš€ Quick Start Workflow

### 1. **Login to EnvSync Cloud**
```bash
envsync login
```

### 2. **Initialize Your Project**
```bash
envsync init --app "my-project" --env-type "development"
```

### 3. **Push Your Local Environment**
```bash
envsync push
```

### 4. **Pull Environment to Another Machine**
```bash
envsync pull
```

### 5. **Run Your Application**
```bash
envsync run --command "npm start"
```

## ğŸ“ Project Structure

```
envsync-cli/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ cli/
â”‚       â””â”€â”€ main.go         # CLI entry point with urfave/cli setup
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ actions/            # Command implementations
â”‚   â”‚   â””â”€â”€ run.go          # Run command with env injection
â”‚   â”œâ”€â”€ constants/          # Application constants
â”‚   â”œâ”€â”€ config/             # Configuration management
â”‚   â”œâ”€â”€ domain/             # Domain models
â”‚   â”œâ”€â”€ services/           # Business logic and services
â”‚   â”‚   â””â”€â”€ sync.go         # Sync service with TOML config reading
â”‚   â”œâ”€â”€ repository/         # Data access and API client setup
â”‚   â”‚   â””â”€â”€ repository.go   # HTTP client with API key support
â”‚   â”œâ”€â”€ mappers/            # Data transformation and mapping
â”‚   â””â”€â”€ logger/             # Logging utilities
â”œâ”€â”€ bin/                    # Compiled binaries
â”œâ”€â”€ Makefile               # Development and build automation
â””â”€â”€ docs/                  # Documentation
```

## ğŸ”¨ Development

### Prerequisites
- [Go](https://golang.org/) 1.21 or higher
- Make (for using Makefile commands)

### Development Commands

The project uses a Makefile for development automation:

```bash
# Clone the repository
git clone https://github.com/EnvSync-Cloud/envsync-cli.git
cd envsync-cli
```

```bash
# Build the binary
make build

# Install the binary to /usr/local/bin
make install

# Run in development mode
make dev

# Watch for changes and rebuild automatically
make watch

# Update dependencies
make update

# Format code and tidy modules
make tidy

# Run linter
make lint

# Show all available commands
make help
```

### Custom Backend URL

You can build the CLI with a custom backend URL:

```bash
make build BACKEND_URL=https://your-custom-api.com/api
```

### Run Development Version

```bash
./bin/envsync --help
```

## ğŸŒŸ EnvSync Ecosystem

- **envsync-cli** - Command line interface (this repo)
- **[envsync-web](https://github.com/EnvSync-Cloud/envsync-web)** - Web dashboard for managing configurations
- **[envsync-api](https://github.com/EnvSync-Cloud/envsync-api)** - REST API and backend services
- **[envsync-landing](https://github.com/EnvSync-Cloud/envsync-landing)** - Landing page

## ğŸ¤ Contributing

We're building the future of environment management! 

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

### Development Guidelines

- Follow Go best practices and conventions
- Add tests for new functionality
- Update documentation for new commands
- Ensure cross-platform compatibility
- Use the Makefile for consistent development workflows

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ’¬ Support & Community

- ğŸ“§ **Email:** hi@envsync.cloud
- ğŸ“– **Blog:** [docs.envsync.cloud](https://blog.envsync.cloud)
- ğŸ› **Issues:** [GitHub Issues](https://github.com/EnvSync-Cloud/envsync-cli/issues)

## ğŸ”— Useful Links

- ğŸŒ **Web Dashboard:** [envsync.cloud](https://envsync.cloud)
- ğŸ“š **API Documentation:** [api.envsync.cloud/docs](https://api.envsync.cloud/docs)
- ğŸ“¦ **Releases:** [GitHub Releases](https://github.com/EnvSync-Cloud/envsync-cli/releases)

---

**Making environment configuration simple, secure, and synchronized** ğŸŒŸ

Built with â¤ï¸ by the EnvSync team
